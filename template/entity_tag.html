<%inherit file="base.html"/>

<%def name="title()">${obj["name"]} | Edit tags</%def>

<%def name="page()">

<h1>
  <a
     href="${url_rewrite(obj["url"], parameters)}"
     >${obj["name"]}</a> | Edit tags
</h1>

<div class="section">
  <h3>Current Tags</h3>

  <ul class="tag_list">
    %for tag in obj[type_tag_list]:
    ${self.mini.tag_li(tag, entity=False, note=False,
      link_url="%s/tag/%s" % (obj["url"], tag["id"]),
      unlink=True, next=uri,
      visibility=True)}
    %endfor
  </ul>
</div>    
    
<div class="section">
  <h3>Available Tags</h3>

  <div class="action-bar">
    <form id="tag-search">
      <label name="search">
        <span>Search</span>
        <input name="search" value="${search or ''}">
      </label>
      ${self.mini.visibility_search_input(visibility, current_user)}
      <input type="submit">
    </form>

    <ul class="actions">
      <a
         class="action"
         href="${url_rewrite("/%s-tag/new" % type_url, dict(
                                      parameters,
                                      next=url_rewrite(uri, parameters),
                                      ))}"
         >Create a tag</a>
    </ul>

  </div>

<ul class="tag_list">
  <%
     tag_id_list = [tag["id"] for tag in obj[type_tag_list]]
     %>
  %for tag in tag_list:
  %if tag["id"] not in tag_id_list:
  ${self.mini.tag_li(tag, entity=False, note=False,
    link_url="%s/tag/%s" % (obj["url"], tag["id"]),
    link=True, next=uri,
    visibility=True)}
  %endif
  %endfor
</ul>

</div>

</%def>

